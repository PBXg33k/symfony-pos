{% extends 'AppBundle::base.html.twig' %}


{% macro tagCollectionItem(formData) %}

    <div class="row">
        <div class="col-lg-2">
            {{ form_row(formData.product) }}
        </div>

        <div class="col-lg-2">
            {{ form_row(formData.qty) }}
        </div>

        <div class="col-lg-2">
            {{ form_row(formData.cost) }}
        </div>

        <div class="col-lg-2">
            {{ form_row(formData.subtotal) }}
        </div>
        <div class="col-lg-2 col-xs-12">
            <a href="#" class="delete_item"> <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> </a>
        </div>
    </div>
{% endmacro %}



{% block body -%}
    <h1>{{ 'purchase.labels.self'|trans }} {{ 'crud.labels.edit' | trans }}</h1>

    {{ form_start(edit_form) }}
    <div id="form_items">

        <ul class="items" data-prototype="{{ _self.tagCollectionItem(edit_form.items.vars.prototype)|e }}" data-index="{{ edit_form.items.count }}">
            {{ form_row(edit_form.items) }}

            {% for item in edit_form.items %}
                {{ _self.tagCollectionItem(item) }}
            {% endfor %}
        </ul>

    </div>
    <div class="row">
        <div class="col-lg-12">
            <a  id="addItem"> <span  class="glyphicon glyphicon-plus" aria-hidden="true"></span> </a>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-offset-4 col-lg-3 col-xs-12">
            {{ form_row(edit_form.person) }}
        </div>
    </div>
    <div class="row">
        <div class="col-lg-offset-4 col-lg-3 col-xs-12">
            {{ form_row(edit_form.cash) }}
        </div>
    </div>
    <div class="row">
        <div class="col-lg-offset-4 col-lg-3 col-xs-12">
            {{ form_row(edit_form.total) }}
        </div>
    </div>

    <div class="row">
        <div class="col-lg-offset-4 col-lg-3 col-xs-12">
            {{ form_row(edit_form.submit) }}
        </div>
    </div>

    {{ form_row(edit_form._token) }}
    {{ form_end(edit_form) }}




    {{ form(delete_form) }}

    <div class="record_actions">


    </div>

    <div class="row" id="bottom_bar">
        <div class="col-xs-12">

            <button class="btn btn-primary" id="saveEntity" style="width: 32%"> {{ 'Save' | trans }} </button>
            <button class="btn btn-default" id="goBack" style="width: 32%"> {{ 'Go back' | trans }}  </button>
            <a href="#" class="btn btn-warning" data-target="#myModal" data-toggle="modal" id="ask_delete_button" style="width: 32%"> {{ 'Delete' | trans }}  </a>

        </div>
    </div>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title" id="myModalLabel">{{ 'Delete the sale?' | trans }}</h3>
                </div>
                <div class="modal-body">
                    {{ 'Click on delete to remove the sale' | trans }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'Close' | trans }}</button>
                    <button type="button" id="deleteOperation" class="btn btn-danger">{{ 'Delete' | trans }}</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
